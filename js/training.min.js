var id_global;var dir_global=true;var arr;var answer;var current=0;var list;function randomInt(b,a){return Math.floor((Math.random()*(a-b+1)+b))}function randomIntArray(e,l,b,a){a=(typeof a==="undefined")?null:a;if(l-e<1){return null}var g=(b-1<=(l-e)?b:(l-e+1));var m=[],h=[],c;for(var k=e,f=0;k<=l;k++){if(k===a){continue}m[f]=k;f++}for(var d=m.length-1;g;g--,d--){c=randomInt(0,d);h.push(m[c]);m.splice(c,1)}return h}function getNewVocab(e){var d=[list[current]];d=d.concat(randomIntArray(0,arr.count-1,4,list[current]));var c=randomIntArray(0,4,5);answer=c[0];dir_global=e;var a=arr.content[d[0]][(e?0:1)].split(", ",2);document.getElementById("left-box-h1").innerHTML=a[0];if(a[1]){document.getElementById("left-box-p").innerHTML=a[1]}else{document.getElementById("left-box-p").innerHTML=""}for(var b=0;b<5;b++){document.getElementById("btn-"+c[b]).innerHTML=arr.content[d[b]][(e?1:0)]}}function ready(a){id_global=a;$.ajax({type:"POST",url:"server/server.php",data:{mode:"get_file_content",id:id_global},success:function(b){arr=$.parseJSON(b);list=randomIntArray(0,arr.count-1,arr.count);nextVocab()}})}function nextVocab(){if(current===arr.count){current=0;$("#progress-lesson").css({width:0});list=randomIntArray(0,arr.count-1,arr.count)}$("#language-swap").removeClass("toggle-disabled");var c=$("#right-box-wrapper");var b='<div id="right-box" class="list-group list-transparent">';for(var a=0;a<5;a++){b+='<button id="btn-'+a+'" type="button" class="list-group-item wordwrap" onclick="answerChosen(this);"></button>'}b+="</div>";c.html(b);getNewVocab(dir_global);$("#right-box").animate({opacity:1},150);current++}function answerChosen(b){$("#language-swap").addClass("toggle-disabled");var c=Math.round(current/(arr.count)*100);$("#progress-lesson").css({width:c+"%"});var d=$("#right-box-wrapper");if(b.id==="btn-"+answer){d.animate({opacity:0},100,function(){d.html('<div class="jumbotron jumbotron-transparent-correct"><h1>Richtig!</h1><p>'+b.innerHTML+'</p><button type="button" class="btn btn-default" onclick="nextVocab();">Weiter</button></div>');d.animate({opacity:1},100)});$.ajax({url:"server/server.php",type:"POST",data:{mode:"set_stat",id:id_global,answer:1},success:function(e){}})}else{var a=document.getElementById("btn-"+answer).innerHTML;d.animate({opacity:0},100,function(){d.html('<div class="jumbotron jumbotron-transparent-wrong"><h1>Falsch!</h1><p><s>'+b.innerHTML+"</s><p>"+a+'</p></p><button id="button-next" type="button" class="btn btn-default" onclick="nextVocab();">Weiter</button></div>');d.animate({opacity:1},100)});$.ajax({url:"server/server.php",type:"POST",data:{mode:"set_stat",id:id_global,answer:0},success:function(e){}})}}$("#language-swap").click(function(){if(!($(this).hasClass("toggle-disabled"))){$(this).toggleClass("swapped");dir_global=!dir_global;getNewVocab(dir_global)}});